{ "apiVersion": "v1", "items": [ { "apiVersion": "v1", "kind": "Pod", "metadata": { "annotations": { "cni.projectcalico.org/containerID": "f6e9245515af745cb28bb8ec5d16e6f25b88a55c4f27b6ff3698c1dfedb69dc6", "cni.projectcalico.org/podIP": "10.1.241.137/32", "cni.projectcalico.org/podIPs": "10.1.241.137/32", "sidecar.istio.io/inject": "false" }, "creationTimestamp": "2023-07-25T16:46:45Z", "generateName": "cm-acme-http-solver-", "labels": { "acme.cert-manager.io/http-domain": "674563438", "acme.cert-manager.io/http-token": "857542188", "acme.cert-manager.io/http01-solver": "true" }, "name": "cm-acme-http-solver-9trqw", "namespace": "default", "ownerReferences": [ { "apiVersion": "acme.cert-manager.io/v1", "blockOwnerDeletion": true, "controller": true, "kind": "Challenge", "name": "apidb-tls-ts6cm-1396149733-2160497468", "uid": "45ec024a-d2c6-4894-a0cc-4eeeb1dec5b1" } ], "resourceVersion": "2937", "uid": "328dc2d8-a5b1-402a-b4b6-d35aa7d32062" }, "spec": { "containers": [ { "args": [ "--listen-port=8089", "--domain=db.hostype.com", "--token=9Sejw6FM2X-Tt9cb8-yFFr2xtbPDVzLEnu5kpEQXgF4", "--key=9Sejw6FM2X-Tt9cb8-yFFr2xtbPDVzLEnu5kpEQXgF4.ld7ZjTG5fuBZl5Piu4_NWzGLWcWf7_rVHsJm3axxBMI" ], "image": "quay.io/jetstack/cert-manager-acmesolver:v1.8.0", "imagePullPolicy": "IfNotPresent", "name": "acmesolver", "ports": [ { "containerPort": 8089, "name": "http", "protocol": "TCP" } ], "resources": { "limits": { "cpu": "100m", "memory": "64Mi" }, "requests": { "cpu": "10m", "memory": "64Mi" } }, "securityContext": { "allowPrivilegeEscalation": false }, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-x5wb9", "readOnly": true } ] } ], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "control1", "nodeSelector": { "kubernetes.io/os": "linux" }, "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "OnFailure", "schedulerName": "default-scheduler", "securityContext": { "runAsNonRoot": true }, "serviceAccount": "default", "serviceAccountName": "default", "terminationGracePeriodSeconds": 30, "tolerations": [ { "effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300 }, { "effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300 } ], "volumes": [ { "name": "kube-api-access-x5wb9", "projected": { "defaultMode": 420, "sources": [ { "serviceAccountToken": { "expirationSeconds": 3607, "path": "token" } }, { "configMap": { "items": [ { "key": "ca.crt", "path": "ca.crt" } ], "name": "kube-root-ca.crt" } }, { "downwardAPI": { "items": [ { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.namespace" }, "path": "namespace" } ] } } ] } } ] }, "status": { "conditions": [ { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:46:45Z", "status": "True", "type": "Initialized" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:48:20Z", "status": "True", "type": "Ready" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:48:20Z", "status": "True", "type": "ContainersReady" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:46:45Z", "status": "True", "type": "PodScheduled" } ], "containerStatuses": [ { "containerID": "containerd://ab572409923263bcd9e7c36a3c4f1e95f224fa83bb106adb9d4edf4040779f6e", "image": "quay.io/jetstack/cert-manager-acmesolver:v1.8.0", "imageID": "quay.io/jetstack/cert-manager-acmesolver@sha256:f4495b67211ed05c732c83d4a6163d4e38cad40294a62f35b371d266c78be58a", "lastState": {}, "name": "acmesolver", "ready": true, "restartCount": 0, "started": true, "state": { "running": { "startedAt": "2023-07-25T16:48:20Z" } } } ], "hostIP": "10.0.1.1", "phase": "Running", "podIP": "10.1.241.137", "podIPs": [ { "ip": "10.1.241.137" } ], "qosClass": "Burstable", "startTime": "2023-07-25T16:46:45Z" } }, { "apiVersion": "v1", "kind": "Pod", "metadata": { "creationTimestamp": "2023-07-25T16:46:41Z", "generateName": "openvidu-server-deployment-696c68597b-", "labels": { "app": "openvidu-server", "pod-template-hash": "696c68597b" }, "name": "openvidu-server-deployment-696c68597b-2cgwp", "namespace": "default", "ownerReferences": [ { "apiVersion": "apps/v1", "blockOwnerDeletion": true, "controller": true, "kind": "ReplicaSet", "name": "openvidu-server-deployment-696c68597b", "uid": "f4e28faf-0957-4e85-acbd-5efd712bb7bb" } ], "resourceVersion": "3020", "uid": "21e49afa-8432-470a-8be1-b979de2eca80" }, "spec": { "containers": [ { "env": [ { "name": "POD_IP", "valueFrom": { "fieldRef": { "apiVersion": "v1", "fieldPath": "status.podIP" } } }, { "name": "COTURN_SHARED_SECRET_KEY", "value": "dTK6LOd93Mpdv1DP3sk4xfEQm7IGtYLD2" }, { "name": "SERVER_SSL_ENABLED", "value": "false" }, { "name": "DOMAIN_OR_PUBLIC_IP", "value": "vidu.hostype.com" }, { "name": "KMS_URIS", "value": "[\"ws://vidu.hostype.com:8888/kurento\"]" }, { "name": "OPENVIDU_SECRET", "value": "dTK6LOd93Mpdv1DP3sk4xfEQm7IGtYLD2" }, { "name": "ALLOWED_ACCESS_TO_DASHBOARD", "value": "all" }, { "name": "ALLOWED_ACCESS_TO_RESTAPI", "value": "all" }, { "name": "OPENVIDU_WEBHOOK", "value": "true" }, { "name": "OPENVIDU_WEBHOOK_ENDPOINT", "value": "https://api.hostype.com/activities?token=dTK6LOd93Mpdv1DP3sk4xfEQm7IGtYLD2" }, { "name": "COTURN_IP", "value": "turn.hostype.com" }, { "name": "COTURN_PORT", "value": "3478" }, { "name": "SERVER_PORT", "value": "5443" }, { "name": "HTTP_PORT", "value": "80" }, { "name": "HTTPS_PORT", "value": "443" }, { "name": "CERTIFICATE_TYPE", "value": "selfsigned" }, { "name": "SUPPORT_DEPRECATED_API", "value": "false" } ], "image": "docker.io/openvidu/openvidu-server:2.28.0", "imagePullPolicy": "IfNotPresent", "name": "openvidu-server", "ports": [ { "containerPort": 5443, "hostPort": 5443, "protocol": "TCP" } ], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9v6l2", "readOnly": true } ] }, { "env": [ { "name": "POD_IP", "valueFrom": { "fieldRef": { "apiVersion": "v1", "fieldPath": "status.podIP" } } }, { "name": "KMS_MIN_PORT", "value": "40000" }, { "name": "KMS_MAX_PORT", "value": "57000" }, { "name": "KURENTO_LOGS_PATH", "value": "/opt/openvidu/kurento-logs" } ], "image": "kurento/kurento-media-server:6.18.0", "imagePullPolicy": "IfNotPresent", "name": "kms", "ports": [ { "containerPort": 8888, "hostPort": 8888, "protocol": "TCP" } ], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9v6l2", "readOnly": true } ] }, { "args": [ "--log-file=stdout", "--listening-port=3478", "--fingerprint", "--min-port=57001", "--max-port=65535", "--realm=openvidu", "--verbose", "--use-auth-secret", "--static-auth-secret=dTK6LOd93Mpdv1DP3sk4xfEQm7IGtYLD2" ], "envFrom": [ { "configMapRef": { "name": "openvidu-config" } } ], "image": "docker.io/openvidu/openvidu-coturn:2.28.0", "imagePullPolicy": "IfNotPresent", "name": "openvidu-coturn", "ports": [ { "containerPort": 3478, "hostPort": 3478, "protocol": "TCP" }, { "containerPort": 3478, "hostPort": 3478, "protocol": "UDP" } ], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9v6l2", "readOnly": true } ] } ], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "hostNetwork": true, "nodeName": "control2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "default", "serviceAccountName": "default", "terminationGracePeriodSeconds": 30, "tolerations": [ { "effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300 }, { "effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300 } ], "volumes": [ { "name": "kube-api-access-9v6l2", "projected": { "defaultMode": 420, "sources": [ { "serviceAccountToken": { "expirationSeconds": 3607, "path": "token" } }, { "configMap": { "items": [ { "key": "ca.crt", "path": "ca.crt" } ], "name": "kube-root-ca.crt" } }, { "downwardAPI": { "items": [ { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.namespace" }, "path": "namespace" } ] } } ] } } ] }, "status": { "conditions": [ { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:47:16Z", "status": "True", "type": "Initialized" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:48:30Z", "status": "True", "type": "Ready" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:48:30Z", "status": "True", "type": "ContainersReady" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:47:16Z", "status": "True", "type": "PodScheduled" } ], "containerStatuses": [ { "containerID": "containerd://9c279303791584b6fa93e8a0028da369bb9bda53f227421a6c73891da4587d70", "image": "docker.io/kurento/kurento-media-server:6.18.0", "imageID": "docker.io/kurento/kurento-media-server@sha256:d311affc2bef552bfebea37da2ed884acc20083485643a540d2c6ccc789924b6", "lastState": {}, "name": "kms", "ready": true, "restartCount": 0, "started": true, "state": { "running": { "startedAt": "2023-07-25T16:47:53Z" } } }, { "containerID": "containerd://7d64fee0b64a9d2817a1e2f9ccbfe626f478f1ece9c7a333381d0ff15633af07", "image": "docker.io/openvidu/openvidu-coturn:2.28.0", "imageID": "docker.io/openvidu/openvidu-coturn@sha256:5013926722f5584849368bbb25adbfbecfbbde62a9fe8ecc47ce01431c2a06a5", "lastState": {}, "name": "openvidu-coturn", "ready": true, "restartCount": 0, "started": true, "state": { "running": { "startedAt": "2023-07-25T16:48:01Z" } } }, { "containerID": "containerd://4dabe1e4f16c639d4f16d9aa443c7962dd017807307760365e0bc473b2bd0abc", "image": "docker.io/openvidu/openvidu-server:2.28.0", "imageID": "docker.io/openvidu/openvidu-server@sha256:e9590bb1fb8e2572c9f5d3149e0a47f15165633d12eb2ebeb93951f4335c41a7", "lastState": { "terminated": { "containerID": "containerd://033f19cde35bd2825a915d4cb52c6c10187b705700ef3d2835bc5c01a095d4f5", "exitCode": 1, "finishedAt": "2023-07-25T16:48:10Z", "reason": "Error", "startedAt": "2023-07-25T16:48:02Z" } }, "name": "openvidu-server", "ready": true, "restartCount": 2, "started": true, "state": { "running": { "startedAt": "2023-07-25T16:48:29Z" } } } ], "hostIP": "10.0.1.1", "phase": "Running", "podIP": "10.0.1.1", "podIPs": [ { "ip": "10.0.1.1" } ], "qosClass": "BestEffort", "startTime": "2023-07-25T16:47:16Z" } }, { "apiVersion": "v1", "kind": "Pod", "metadata": { "creationTimestamp": "2023-07-25T16:46:41Z", "generateName": "openvidu-server-deployment-696c68597b-", "labels": { "app": "openvidu-server", "pod-template-hash": "696c68597b" }, "name": "openvidu-server-deployment-696c68597b-z2wpj", "namespace": "default", "ownerReferences": [ { "apiVersion": "apps/v1", "blockOwnerDeletion": true, "controller": true, "kind": "ReplicaSet", "name": "openvidu-server-deployment-696c68597b", "uid": "f4e28faf-0957-4e85-acbd-5efd712bb7bb" } ], "resourceVersion": "3082", "uid": "4ad47afa-6ca5-4cc1-b83d-220f5092465f" }, "spec": { "containers": [ { "env": [ { "name": "POD_IP", "valueFrom": { "fieldRef": { "apiVersion": "v1", "fieldPath": "status.podIP" } } }, { "name": "COTURN_SHARED_SECRET_KEY", "value": "dTK6LOd93Mpdv1DP3sk4xfEQm7IGtYLD2" }, { "name": "SERVER_SSL_ENABLED", "value": "false" }, { "name": "DOMAIN_OR_PUBLIC_IP", "value": "vidu.hostype.com" }, { "name": "KMS_URIS", "value": "[\"ws://vidu.hostype.com:8888/kurento\"]" }, { "name": "OPENVIDU_SECRET", "value": "dTK6LOd93Mpdv1DP3sk4xfEQm7IGtYLD2" }, { "name": "ALLOWED_ACCESS_TO_DASHBOARD", "value": "all" }, { "name": "ALLOWED_ACCESS_TO_RESTAPI", "value": "all" }, { "name": "OPENVIDU_WEBHOOK", "value": "true" }, { "name": "OPENVIDU_WEBHOOK_ENDPOINT", "value": "https://api.hostype.com/activities?token=dTK6LOd93Mpdv1DP3sk4xfEQm7IGtYLD2" }, { "name": "COTURN_IP", "value": "turn.hostype.com" }, { "name": "COTURN_PORT", "value": "3478" }, { "name": "SERVER_PORT", "value": "5443" }, { "name": "HTTP_PORT", "value": "80" }, { "name": "HTTPS_PORT", "value": "443" }, { "name": "CERTIFICATE_TYPE", "value": "selfsigned" }, { "name": "SUPPORT_DEPRECATED_API", "value": "false" } ], "image": "docker.io/openvidu/openvidu-server:2.28.0", "imagePullPolicy": "IfNotPresent", "name": "openvidu-server", "ports": [ { "containerPort": 5443, "hostPort": 5443, "protocol": "TCP" } ], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-gqt6k", "readOnly": true } ] }, { "env": [ { "name": "POD_IP", "valueFrom": { "fieldRef": { "apiVersion": "v1", "fieldPath": "status.podIP" } } }, { "name": "KMS_MIN_PORT", "value": "40000" }, { "name": "KMS_MAX_PORT", "value": "57000" }, { "name": "KURENTO_LOGS_PATH", "value": "/opt/openvidu/kurento-logs" } ], "image": "kurento/kurento-media-server:6.18.0", "imagePullPolicy": "IfNotPresent", "name": "kms", "ports": [ { "containerPort": 8888, "hostPort": 8888, "protocol": "TCP" } ], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-gqt6k", "readOnly": true } ] }, { "args": [ "--log-file=stdout", "--listening-port=3478", "--fingerprint", "--min-port=57001", "--max-port=65535", "--realm=openvidu", "--verbose", "--use-auth-secret", "--static-auth-secret=dTK6LOd93Mpdv1DP3sk4xfEQm7IGtYLD2" ], "envFrom": [ { "configMapRef": { "name": "openvidu-config" } } ], "image": "docker.io/openvidu/openvidu-coturn:2.28.0", "imagePullPolicy": "IfNotPresent", "name": "openvidu-coturn", "ports": [ { "containerPort": 3478, "hostPort": 3478, "protocol": "TCP" }, { "containerPort": 3478, "hostPort": 3478, "protocol": "UDP" } ], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-gqt6k", "readOnly": true } ] } ], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "hostNetwork": true, "nodeName": "master", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "default", "serviceAccountName": "default", "terminationGracePeriodSeconds": 30, "tolerations": [ { "effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300 }, { "effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300 } ], "volumes": [ { "name": "kube-api-access-gqt6k", "projected": { "defaultMode": 420, "sources": [ { "serviceAccountToken": { "expirationSeconds": 3607, "path": "token" } }, { "configMap": { "items": [ { "key": "ca.crt", "path": "ca.crt" } ], "name": "kube-root-ca.crt" } }, { "downwardAPI": { "items": [ { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.namespace" }, "path": "namespace" } ] } } ] } } ] }, "status": { "conditions": [ { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:46:41Z", "status": "True", "type": "Initialized" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:48:38Z", "status": "True", "type": "Ready" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:48:38Z", "status": "True", "type": "ContainersReady" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:46:41Z", "status": "True", "type": "PodScheduled" } ], "containerStatuses": [ { "containerID": "containerd://5d3534b72ff8697aeafba022baaa7ef1dd95c80c77a50d4ecaff59bc430c0800", "image": "docker.io/kurento/kurento-media-server:6.18.0", "imageID": "docker.io/kurento/kurento-media-server@sha256:d311affc2bef552bfebea37da2ed884acc20083485643a540d2c6ccc789924b6", "lastState": {}, "name": "kms", "ready": true, "restartCount": 0, "started": true, "state": { "running": { "startedAt": "2023-07-25T16:48:33Z" } } }, { "containerID": "containerd://98ab059f078beefe060831a8e2dbf169bcaff657451224fb9c454162f8cdbeb4", "image": "docker.io/openvidu/openvidu-coturn:2.28.0", "imageID": "docker.io/openvidu/openvidu-coturn@sha256:5013926722f5584849368bbb25adbfbecfbbde62a9fe8ecc47ce01431c2a06a5", "lastState": {}, "name": "openvidu-coturn", "ready": true, "restartCount": 0, "started": true, "state": { "running": { "startedAt": "2023-07-25T16:48:36Z" } } }, { "containerID": "containerd://c858fe506e205d2d3b646685f743f684cb53f35188f86d9a037a70c31f06175b", "image": "docker.io/openvidu/openvidu-server:2.28.0", "imageID": "docker.io/openvidu/openvidu-server@sha256:e9590bb1fb8e2572c9f5d3149e0a47f15165633d12eb2ebeb93951f4335c41a7", "lastState": { "terminated": { "containerID": "containerd://125b41b3a2904f4400f4f5e62f7a28b28725e17799ea2a80ebdfa78c8190cf04", "exitCode": 1, "finishedAt": "2023-07-25T16:47:10Z", "reason": "Error", "startedAt": "2023-07-25T16:46:55Z" } }, "name": "openvidu-server", "ready": true, "restartCount": 1, "started": true, "state": { "running": { "startedAt": "2023-07-25T16:48:37Z" } } } ], "hostIP": "10.0.1.1", "phase": "Running", "podIP": "10.0.1.1", "podIPs": [ { "ip": "10.0.1.1" } ], "qosClass": "BestEffort", "startTime": "2023-07-25T16:46:41Z" } }, { "apiVersion": "v1", "kind": "Pod", "metadata": { "creationTimestamp": "2023-07-25T16:46:41Z", "generateName": "openvidu-server-deployment-696c68597b-", "labels": { "app": "openvidu-server", "pod-template-hash": "696c68597b" }, "name": "openvidu-server-deployment-696c68597b-6nvvs", "namespace": "default", "ownerReferences": [ { "apiVersion": "apps/v1", "blockOwnerDeletion": true, "controller": true, "kind": "ReplicaSet", "name": "openvidu-server-deployment-696c68597b", "uid": "f4e28faf-0957-4e85-acbd-5efd712bb7bb" } ], "resourceVersion": "3197", "uid": "a9a2efe1-fdaa-4641-88e2-e01bbe97ae24" }, "spec": { "containers": [ { "env": [ { "name": "POD_IP", "valueFrom": { "fieldRef": { "apiVersion": "v1", "fieldPath": "status.podIP" } } }, { "name": "COTURN_SHARED_SECRET_KEY", "value": "dTK6LOd93Mpdv1DP3sk4xfEQm7IGtYLD2" }, { "name": "SERVER_SSL_ENABLED", "value": "false" }, { "name": "DOMAIN_OR_PUBLIC_IP", "value": "vidu.hostype.com" }, { "name": "KMS_URIS", "value": "[\"ws://vidu.hostype.com:8888/kurento\"]" }, { "name": "OPENVIDU_SECRET", "value": "dTK6LOd93Mpdv1DP3sk4xfEQm7IGtYLD2" }, { "name": "ALLOWED_ACCESS_TO_DASHBOARD", "value": "all" }, { "name": "ALLOWED_ACCESS_TO_RESTAPI", "value": "all" }, { "name": "OPENVIDU_WEBHOOK", "value": "true" }, { "name": "OPENVIDU_WEBHOOK_ENDPOINT", "value": "https://api.hostype.com/activities?token=dTK6LOd93Mpdv1DP3sk4xfEQm7IGtYLD2" }, { "name": "COTURN_IP", "value": "turn.hostype.com" }, { "name": "COTURN_PORT", "value": "3478" }, { "name": "SERVER_PORT", "value": "5443" }, { "name": "HTTP_PORT", "value": "80" }, { "name": "HTTPS_PORT", "value": "443" }, { "name": "CERTIFICATE_TYPE", "value": "selfsigned" }, { "name": "SUPPORT_DEPRECATED_API", "value": "false" } ], "image": "docker.io/openvidu/openvidu-server:2.28.0", "imagePullPolicy": "IfNotPresent", "name": "openvidu-server", "ports": [ { "containerPort": 5443, "hostPort": 5443, "protocol": "TCP" } ], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-f82mn", "readOnly": true } ] }, { "env": [ { "name": "POD_IP", "valueFrom": { "fieldRef": { "apiVersion": "v1", "fieldPath": "status.podIP" } } }, { "name": "KMS_MIN_PORT", "value": "40000" }, { "name": "KMS_MAX_PORT", "value": "57000" }, { "name": "KURENTO_LOGS_PATH", "value": "/opt/openvidu/kurento-logs" } ], "image": "kurento/kurento-media-server:6.18.0", "imagePullPolicy": "IfNotPresent", "name": "kms", "ports": [ { "containerPort": 8888, "hostPort": 8888, "protocol": "TCP" } ], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-f82mn", "readOnly": true } ] }, { "args": [ "--log-file=stdout", "--listening-port=3478", "--fingerprint", "--min-port=57001", "--max-port=65535", "--realm=openvidu", "--verbose", "--use-auth-secret", "--static-auth-secret=dTK6LOd93Mpdv1DP3sk4xfEQm7IGtYLD2" ], "envFrom": [ { "configMapRef": { "name": "openvidu-config" } } ], "image": "docker.io/openvidu/openvidu-coturn:2.28.0", "imagePullPolicy": "IfNotPresent", "name": "openvidu-coturn", "ports": [ { "containerPort": 3478, "hostPort": 3478, "protocol": "TCP" }, { "containerPort": 3478, "hostPort": 3478, "protocol": "UDP" } ], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-f82mn", "readOnly": true } ] } ], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "hostNetwork": true, "nodeName": "control1", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "default", "serviceAccountName": "default", "terminationGracePeriodSeconds": 30, "tolerations": [ { "effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300 }, { "effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300 } ], "volumes": [ { "name": "kube-api-access-f82mn", "projected": { "defaultMode": 420, "sources": [ { "serviceAccountToken": { "expirationSeconds": 3607, "path": "token" } }, { "configMap": { "items": [ { "key": "ca.crt", "path": "ca.crt" } ], "name": "kube-root-ca.crt" } }, { "downwardAPI": { "items": [ { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.namespace" }, "path": "namespace" } ] } } ] } } ] }, "status": { "conditions": [ { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:46:41Z", "status": "True", "type": "Initialized" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:48:53Z", "status": "True", "type": "Ready" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:48:53Z", "status": "True", "type": "ContainersReady" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:46:41Z", "status": "True", "type": "PodScheduled" } ], "containerStatuses": [ { "containerID": "containerd://41322cdc85e94c3963232f3128aba969adb78eccde2f268743e89594103dafd9", "image": "docker.io/kurento/kurento-media-server:6.18.0", "imageID": "docker.io/kurento/kurento-media-server@sha256:d311affc2bef552bfebea37da2ed884acc20083485643a540d2c6ccc789924b6", "lastState": {}, "name": "kms", "ready": true, "restartCount": 0, "started": true, "state": { "running": { "startedAt": "2023-07-25T16:48:49Z" } } }, { "containerID": "containerd://12a84a5278329af90d9373ab4cd014e7e1488118fd53b2059a3921b868d47224", "image": "docker.io/openvidu/openvidu-coturn:2.28.0", "imageID": "docker.io/openvidu/openvidu-coturn@sha256:5013926722f5584849368bbb25adbfbecfbbde62a9fe8ecc47ce01431c2a06a5", "lastState": {}, "name": "openvidu-coturn", "ready": true, "restartCount": 0, "started": true, "state": { "running": { "startedAt": "2023-07-25T16:48:51Z" } } }, { "containerID": "containerd://313bc08d858267bef663f9bd90877b2d559b18b497042aa26a9213f8237d7ec7", "image": "docker.io/openvidu/openvidu-server:2.28.0", "imageID": "docker.io/openvidu/openvidu-server@sha256:e9590bb1fb8e2572c9f5d3149e0a47f15165633d12eb2ebeb93951f4335c41a7", "lastState": { "terminated": { "containerID": "containerd://4dd8be1d76685547abbfee99c9d6db02611623e4e383a798b8ccb691eff63194", "exitCode": 1, "finishedAt": "2023-07-25T16:47:10Z", "reason": "Error", "startedAt": "2023-07-25T16:46:54Z" } }, "name": "openvidu-server", "ready": true, "restartCount": 1, "started": true, "state": { "running": { "startedAt": "2023-07-25T16:48:52Z" } } } ], "hostIP": "10.0.1.1", "phase": "Running", "podIP": "10.0.1.1", "podIPs": [ { "ip": "10.0.1.1" } ], "qosClass": "BestEffort", "startTime": "2023-07-25T16:46:41Z" } }, { "apiVersion": "v1", "kind": "Pod", "metadata": { "annotations": { "cni.projectcalico.org/containerID": "528e96b53e7a83d0043594df6def1465e70389c1274a872e277e947a0278f8c6", "cni.projectcalico.org/podIP": "10.1.115.135/32", "cni.projectcalico.org/podIPs": "10.1.115.135/32", "kubectl.kubernetes.io/restartedAt": "2023-07-25T16:59:41Z" }, "creationTimestamp": "2023-07-25T16:59:41Z", "generateName": "api-server-5846f89f9d-", "labels": { "app": "api", "pod-template-hash": "5846f89f9d" }, "name": "api-server-5846f89f9d-fvq98", "namespace": "default", "ownerReferences": [ { "apiVersion": "apps/v1", "blockOwnerDeletion": true, "controller": true, "kind": "ReplicaSet", "name": "api-server-5846f89f9d", "uid": "98acfce7-c310-4a52-9a86-965b9c188c3d" } ], "resourceVersion": "5915", "uid": "2076c087-cfed-4f3a-9930-bcb30b48f7e5" }, "spec": { "containers": [ { "command": [ "yarn", "develop" ], "envFrom": [ { "configMapRef": { "name": "api-server-config" } } ], "image": "meetlily/api:v4", "imagePullPolicy": "IfNotPresent", "name": "api-server-container", "ports": [ { "containerPort": 1337, "protocol": "TCP" } ], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/app", "name": "empty-volume" }, { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-wsb2d", "readOnly": true } ] } ], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "control2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "default", "serviceAccountName": "default", "terminationGracePeriodSeconds": 30, "tolerations": [ { "effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300 }, { "effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300 } ], "volumes": [ { "emptyDir": {}, "name": "empty-volume" }, { "name": "kube-api-access-wsb2d", "projected": { "defaultMode": 420, "sources": [ { "serviceAccountToken": { "expirationSeconds": 3607, "path": "token" } }, { "configMap": { "items": [ { "key": "ca.crt", "path": "ca.crt" } ], "name": "kube-root-ca.crt" } }, { "downwardAPI": { "items": [ { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.namespace" }, "path": "namespace" } ] } } ] } } ] }, "status": { "conditions": [ { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:59:41Z", "status": "True", "type": "Initialized" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T17:00:37Z", "status": "True", "type": "Ready" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T17:00:37Z", "status": "True", "type": "ContainersReady" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:59:41Z", "status": "True", "type": "PodScheduled" } ], "containerStatuses": [ { "containerID": "containerd://06bf0d765867c047ff178fe4c9264688e4d9c6486ba666e54a3407bb6670eae7", "image": "docker.io/meetlily/api:v4", "imageID": "docker.io/meetlily/api@sha256:a7646d061fc34d3568e3ecec90e54aff510f5b303a768a3bdf05207bb9dc77f6", "lastState": {}, "name": "api-server-container", "ready": true, "restartCount": 0, "started": true, "state": { "running": { "startedAt": "2023-07-25T17:00:36Z" } } } ], "hostIP": "10.0.1.1", "phase": "Running", "podIP": "10.1.115.135", "podIPs": [ { "ip": "10.1.115.135" } ], "qosClass": "BestEffort", "startTime": "2023-07-25T16:59:41Z" } }, { "apiVersion": "v1", "kind": "Pod", "metadata": { "annotations": { "cni.projectcalico.org/containerID": "840e6f2d12840a6af16009cf659aee92b1a2c2966012a7aab9347d980a53c53e", "cni.projectcalico.org/podIP": "10.1.241.139/32", "cni.projectcalico.org/podIPs": "10.1.241.139/32", "kubectl.kubernetes.io/restartedAt": "2023-07-25T16:59:41Z" }, "creationTimestamp": "2023-07-25T17:00:37Z", "generateName": "api-server-5846f89f9d-", "labels": { "app": "api", "pod-template-hash": "5846f89f9d" }, "name": "api-server-5846f89f9d-55xr8", "namespace": "default", "ownerReferences": [ { "apiVersion": "apps/v1", "blockOwnerDeletion": true, "controller": true, "kind": "ReplicaSet", "name": "api-server-5846f89f9d", "uid": "98acfce7-c310-4a52-9a86-965b9c188c3d" } ], "resourceVersion": "5968", "uid": "5e579c29-9d7e-4848-a8b2-27b6a9bc8ac1" }, "spec": { "containers": [ { "command": [ "yarn", "develop" ], "envFrom": [ { "configMapRef": { "name": "api-server-config" } } ], "image": "meetlily/api:v4", "imagePullPolicy": "IfNotPresent", "name": "api-server-container", "ports": [ { "containerPort": 1337, "protocol": "TCP" } ], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/app", "name": "empty-volume" }, { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-t6g7z", "readOnly": true } ] } ], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "control1", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "default", "serviceAccountName": "default", "terminationGracePeriodSeconds": 30, "tolerations": [ { "effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300 }, { "effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300 } ], "volumes": [ { "emptyDir": {}, "name": "empty-volume" }, { "name": "kube-api-access-t6g7z", "projected": { "defaultMode": 420, "sources": [ { "serviceAccountToken": { "expirationSeconds": 3607, "path": "token" } }, { "configMap": { "items": [ { "key": "ca.crt", "path": "ca.crt" } ], "name": "kube-root-ca.crt" } }, { "downwardAPI": { "items": [ { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.namespace" }, "path": "namespace" } ] } } ] } } ] }, "status": { "conditions": [ { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T17:00:38Z", "status": "True", "type": "Initialized" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T17:00:39Z", "status": "True", "type": "Ready" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T17:00:39Z", "status": "True", "type": "ContainersReady" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T17:00:38Z", "status": "True", "type": "PodScheduled" } ], "containerStatuses": [ { "containerID": "containerd://449ba0461a6fe6a1de2f97315d9241d950c385c66eb8c51d9c882a1f35380e5f", "image": "docker.io/meetlily/api:v4", "imageID": "docker.io/meetlily/api@sha256:a7646d061fc34d3568e3ecec90e54aff510f5b303a768a3bdf05207bb9dc77f6", "lastState": {}, "name": "api-server-container", "ready": true, "restartCount": 0, "started": true, "state": { "running": { "startedAt": "2023-07-25T17:00:39Z" } } } ], "hostIP": "10.0.1.1", "phase": "Running", "podIP": "10.1.241.139", "podIPs": [ { "ip": "10.1.241.139" } ], "qosClass": "BestEffort", "startTime": "2023-07-25T17:00:38Z" } }, { "apiVersion": "v1", "kind": "Pod", "metadata": { "annotations": { "cni.projectcalico.org/containerID": "48d077762092f3730fa7dbd0d51c7464d2670e7a788073bc71846c8835db23f2", "cni.projectcalico.org/podIP": "10.1.219.75/32", "cni.projectcalico.org/podIPs": "10.1.219.75/32", "kubectl.kubernetes.io/restartedAt": "2023-07-25T16:59:41Z" }, "creationTimestamp": "2023-07-25T17:00:39Z", "generateName": "api-server-5846f89f9d-", "labels": { "app": "api", "pod-template-hash": "5846f89f9d" }, "name": "api-server-5846f89f9d-nksv2", "namespace": "default", "ownerReferences": [ { "apiVersion": "apps/v1", "blockOwnerDeletion": true, "controller": true, "kind": "ReplicaSet", "name": "api-server-5846f89f9d", "uid": "98acfce7-c310-4a52-9a86-965b9c188c3d" } ], "resourceVersion": "6024", "uid": "ca86a426-1022-4e49-bab0-fc67b82db6c4" }, "spec": { "containers": [ { "command": [ "yarn", "develop" ], "envFrom": [ { "configMapRef": { "name": "api-server-config" } } ], "image": "meetlily/api:v4", "imagePullPolicy": "IfNotPresent", "name": "api-server-container", "ports": [ { "containerPort": 1337, "protocol": "TCP" } ], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/app", "name": "empty-volume" }, { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-zzdv5", "readOnly": true } ] } ], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "master", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "default", "serviceAccountName": "default", "terminationGracePeriodSeconds": 30, "tolerations": [ { "effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300 }, { "effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300 } ], "volumes": [ { "emptyDir": {}, "name": "empty-volume" }, { "name": "kube-api-access-zzdv5", "projected": { "defaultMode": 420, "sources": [ { "serviceAccountToken": { "expirationSeconds": 3607, "path": "token" } }, { "configMap": { "items": [ { "key": "ca.crt", "path": "ca.crt" } ], "name": "kube-root-ca.crt" } }, { "downwardAPI": { "items": [ { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.namespace" }, "path": "namespace" } ] } } ] } } ] }, "status": { "conditions": [ { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T17:00:40Z", "status": "True", "type": "Initialized" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T17:00:42Z", "status": "True", "type": "Ready" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T17:00:42Z", "status": "True", "type": "ContainersReady" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T17:00:40Z", "status": "True", "type": "PodScheduled" } ], "containerStatuses": [ { "containerID": "containerd://2b70992e41696740d6471830047e83733a2d3171ed59e63ef7c688633f7b430c", "image": "docker.io/meetlily/api:v4", "imageID": "docker.io/meetlily/api@sha256:a7646d061fc34d3568e3ecec90e54aff510f5b303a768a3bdf05207bb9dc77f6", "lastState": {}, "name": "api-server-container", "ready": true, "restartCount": 0, "started": true, "state": { "running": { "startedAt": "2023-07-25T17:00:41Z" } } } ], "hostIP": "10.0.1.1", "phase": "Running", "podIP": "10.1.219.75", "podIPs": [ { "ip": "10.1.219.75" } ], "qosClass": "BestEffort", "startTime": "2023-07-25T17:00:40Z" } }, { "apiVersion": "v1", "kind": "Pod", "metadata": { "annotations": { "cni.projectcalico.org/containerID": "cef5a5668fd2d84970f42f0b92ab9a8e84db79274fd1a9417201568b7971712f", "cni.projectcalico.org/podIP": "10.1.241.134/32", "cni.projectcalico.org/podIPs": "10.1.241.134/32", "status": "{\"conn_url\":\"postgres://10.1.241.134:5432/postgres\",\"api_url\":\"http://10.1.241.134:8008/patroni\",\"state\":\"running\",\"role\":\"master\",\"version\":\"3.0.2\",\"xlog_location\":84375440,\"timeline\":1}" }, "creationTimestamp": "2023-07-25T16:46:40Z", "generateName": "apidb-", "labels": { "application": "patroni", "cluster-name": "apidb", "controller-revision-hash": "apidb-796c9bbd87", "role": "master", "statefulset.kubernetes.io/pod-name": "apidb-0" }, "name": "apidb-0", "namespace": "default", "ownerReferences": [ { "apiVersion": "apps/v1", "blockOwnerDeletion": true, "controller": true, "kind": "StatefulSet", "name": "apidb", "uid": "8ba51045-ff06-4bb5-b48d-9222d830dbd1" } ], "resourceVersion": "151532", "uid": "a5fa519e-bb70-439a-8319-2db72f70401a" }, "spec": { "containers": [ { "env": [ { "name": "PATRONI_KUBERNETES_POD_IP", "valueFrom": { "fieldRef": { "apiVersion": "v1", "fieldPath": "status.podIP" } } }, { "name": "PATRONI_KUBERNETES_NAMESPACE", "valueFrom": { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.namespace" } } }, { "name": "PATRONI_KUBERNETES_BYPASS_API_SERVICE", "value": "true" }, { "name": "PATRONI_KUBERNETES_USE_ENDPOINTS", "value": "true" }, { "name": "PATRONI_KUBERNETES_LABELS", "value": "{application: patroni, cluster-name: apidb}" }, { "name": "PATRONI_SUPERUSER_USERNAME", "value": "postgres" }, { "name": "PATRONI_SUPERUSER_PASSWORD", "value": "Ziyjkxkn4qxg9A" }, { "name": "PATRONI_REPLICATION_USERNAME", "value": "standby" }, { "name": "PATRONI_REPLICATION_PASSWORD", "value": "Ziyjkxkn4qxg9A" }, { "name": "PATRONI_SCOPE", "value": "apidb" }, { "name": "PATRONI_NAME", "valueFrom": { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.name" } } }, { "name": "PATRONI_POSTGRESQL_DATA_DIR", "value": "/home/postgres/pgdata/pgroot/data" }, { "name": "PATRONI_POSTGRESQL_PGPASS", "value": "/tmp/pgpass" }, { "name": "PATRONI_POSTGRESQL_LISTEN", "value": "0.0.0.0:5432" }, { "name": "PATRONI_RESTAPI_LISTEN", "value": "0.0.0.0:8008" } ], "image": "meetlily/patroni:latest", "imagePullPolicy": "IfNotPresent", "name": "apidb", "ports": [ { "containerPort": 8008, "protocol": "TCP" }, { "containerPort": 5432, "protocol": "TCP" } ], "readinessProbe": { "failureThreshold": 3, "httpGet": { "path": "/readiness", "port": 8008, "scheme": "HTTP" }, "initialDelaySeconds": 3, "periodSeconds": 10, "successThreshold": 1, "timeoutSeconds": 5 }, "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/home/postgres/pgdata", "name": "pgdata" }, { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-sknlw", "readOnly": true } ] } ], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "hostname": "apidb-0", "nodeName": "control1", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "apidb", "serviceAccountName": "apidb", "subdomain": "apidb", "terminationGracePeriodSeconds": 0, "tolerations": [ { "effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300 }, { "effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300 } ], "volumes": [ { "emptyDir": {}, "name": "pgdata" }, { "name": "kube-api-access-sknlw", "projected": { "defaultMode": 420, "sources": [ { "serviceAccountToken": { "expirationSeconds": 3607, "path": "token" } }, { "configMap": { "items": [ { "key": "ca.crt", "path": "ca.crt" } ], "name": "kube-root-ca.crt" } }, { "downwardAPI": { "items": [ { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.namespace" }, "path": "namespace" } ] } } ] } } ] }, "status": { "conditions": [ { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:46:41Z", "status": "True", "type": "Initialized" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:48:21Z", "status": "True", "type": "Ready" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:48:21Z", "status": "True", "type": "ContainersReady" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:46:40Z", "status": "True", "type": "PodScheduled" } ], "containerStatuses": [ { "containerID": "containerd://fde16f7b98455b8c0c3ccd99a82537b27bb19fb48754ae6fb27b6aa9dd0399ff", "image": "docker.io/meetlily/patroni:latest", "imageID": "docker.io/meetlily/patroni@sha256:3f58ee7edcd0998e6d0386756363163838a57d9023cb08a11ca5a57962d35251", "lastState": {}, "name": "apidb", "ready": true, "restartCount": 0, "started": true, "state": { "running": { "startedAt": "2023-07-25T16:48:16Z" } } } ], "hostIP": "10.0.1.1", "phase": "Running", "podIP": "10.1.241.134", "podIPs": [ { "ip": "10.1.241.134" } ], "qosClass": "BestEffort", "startTime": "2023-07-25T16:46:41Z" } }, { "apiVersion": "v1", "kind": "Pod", "metadata": { "annotations": { "cni.projectcalico.org/containerID": "b03149987a6218cec4751807f09cd7db89a30bd8da4cfcd856a20fc64374a8c4", "cni.projectcalico.org/podIP": "10.1.115.132/32", "cni.projectcalico.org/podIPs": "10.1.115.132/32", "status": "{\"conn_url\":\"postgres://10.1.115.132:5432/postgres\",\"api_url\":\"http://10.1.115.132:8008/patroni\",\"state\":\"running\",\"role\":\"replica\",\"version\":\"3.0.2\",\"xlog_location\":84375440,\"timeline\":1}" }, "creationTimestamp": "2023-07-25T16:48:21Z", "generateName": "apidb-", "labels": { "application": "patroni", "cluster-name": "apidb", "controller-revision-hash": "apidb-796c9bbd87", "role": "replica", "statefulset.kubernetes.io/pod-name": "apidb-1" }, "name": "apidb-1", "namespace": "default", "ownerReferences": [ { "apiVersion": "apps/v1", "blockOwnerDeletion": true, "controller": true, "kind": "StatefulSet", "name": "apidb", "uid": "8ba51045-ff06-4bb5-b48d-9222d830dbd1" } ], "resourceVersion": "151533", "uid": "016e2f4f-8ffc-4df3-a6b2-f37c2d11cd97" }, "spec": { "containers": [ { "env": [ { "name": "PATRONI_KUBERNETES_POD_IP", "valueFrom": { "fieldRef": { "apiVersion": "v1", "fieldPath": "status.podIP" } } }, { "name": "PATRONI_KUBERNETES_NAMESPACE", "valueFrom": { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.namespace" } } }, { "name": "PATRONI_KUBERNETES_BYPASS_API_SERVICE", "value": "true" }, { "name": "PATRONI_KUBERNETES_USE_ENDPOINTS", "value": "true" }, { "name": "PATRONI_KUBERNETES_LABELS", "value": "{application: patroni, cluster-name: apidb}" }, { "name": "PATRONI_SUPERUSER_USERNAME", "value": "postgres" }, { "name": "PATRONI_SUPERUSER_PASSWORD", "value": "Ziyjkxkn4qxg9A" }, { "name": "PATRONI_REPLICATION_USERNAME", "value": "standby" }, { "name": "PATRONI_REPLICATION_PASSWORD", "value": "Ziyjkxkn4qxg9A" }, { "name": "PATRONI_SCOPE", "value": "apidb" }, { "name": "PATRONI_NAME", "valueFrom": { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.name" } } }, { "name": "PATRONI_POSTGRESQL_DATA_DIR", "value": "/home/postgres/pgdata/pgroot/data" }, { "name": "PATRONI_POSTGRESQL_PGPASS", "value": "/tmp/pgpass" }, { "name": "PATRONI_POSTGRESQL_LISTEN", "value": "0.0.0.0:5432" }, { "name": "PATRONI_RESTAPI_LISTEN", "value": "0.0.0.0:8008" } ], "image": "meetlily/patroni:latest", "imagePullPolicy": "IfNotPresent", "name": "apidb", "ports": [ { "containerPort": 8008, "protocol": "TCP" }, { "containerPort": 5432, "protocol": "TCP" } ], "readinessProbe": { "failureThreshold": 3, "httpGet": { "path": "/readiness", "port": 8008, "scheme": "HTTP" }, "initialDelaySeconds": 3, "periodSeconds": 10, "successThreshold": 1, "timeoutSeconds": 5 }, "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/home/postgres/pgdata", "name": "pgdata" }, { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-phk5x", "readOnly": true } ] } ], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "hostname": "apidb-1", "nodeName": "control2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "apidb", "serviceAccountName": "apidb", "subdomain": "apidb", "terminationGracePeriodSeconds": 0, "tolerations": [ { "effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300 }, { "effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300 } ], "volumes": [ { "emptyDir": {}, "name": "pgdata" }, { "name": "kube-api-access-phk5x", "projected": { "defaultMode": 420, "sources": [ { "serviceAccountToken": { "expirationSeconds": 3607, "path": "token" } }, { "configMap": { "items": [ { "key": "ca.crt", "path": "ca.crt" } ], "name": "kube-root-ca.crt" } }, { "downwardAPI": { "items": [ { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.namespace" }, "path": "namespace" } ] } } ] } } ] }, "status": { "conditions": [ { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:48:21Z", "status": "True", "type": "Initialized" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:48:56Z", "status": "True", "type": "Ready" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:48:56Z", "status": "True", "type": "ContainersReady" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:48:21Z", "status": "True", "type": "PodScheduled" } ], "containerStatuses": [ { "containerID": "containerd://db0abafb74d7da6238c20ce51db6535f1d6bfbde1de117f843dd6f6eb909c685", "image": "docker.io/meetlily/patroni:latest", "imageID": "docker.io/meetlily/patroni@sha256:3f58ee7edcd0998e6d0386756363163838a57d9023cb08a11ca5a57962d35251", "lastState": {}, "name": "apidb", "ready": true, "restartCount": 0, "started": true, "state": { "running": { "startedAt": "2023-07-25T16:48:34Z" } } } ], "hostIP": "10.0.1.1", "phase": "Running", "podIP": "10.1.115.132", "podIPs": [ { "ip": "10.1.115.132" } ], "qosClass": "BestEffort", "startTime": "2023-07-25T16:48:21Z" } }, { "apiVersion": "v1", "kind": "Pod", "metadata": { "annotations": { "cni.projectcalico.org/containerID": "6d2da34c4f3b120d1eb295ba5b975c12e9734df085b629d6af2960a148fed3ad", "cni.projectcalico.org/podIP": "10.1.219.74/32", "cni.projectcalico.org/podIPs": "10.1.219.74/32", "status": "{\"conn_url\":\"postgres://10.1.219.74:5432/postgres\",\"api_url\":\"http://10.1.219.74:8008/patroni\",\"state\":\"running\",\"role\":\"replica\",\"version\":\"3.0.2\",\"xlog_location\":84375440,\"timeline\":1}" }, "creationTimestamp": "2023-07-25T16:48:57Z", "generateName": "apidb-", "labels": { "application": "patroni", "cluster-name": "apidb", "controller-revision-hash": "apidb-796c9bbd87", "role": "replica", "statefulset.kubernetes.io/pod-name": "apidb-2" }, "name": "apidb-2", "namespace": "default", "ownerReferences": [ { "apiVersion": "apps/v1", "blockOwnerDeletion": true, "controller": true, "kind": "StatefulSet", "name": "apidb", "uid": "8ba51045-ff06-4bb5-b48d-9222d830dbd1" } ], "resourceVersion": "151534", "uid": "8ba9b7d3-99d3-4148-be99-0875e382ffd4" }, "spec": { "containers": [ { "env": [ { "name": "PATRONI_KUBERNETES_POD_IP", "valueFrom": { "fieldRef": { "apiVersion": "v1", "fieldPath": "status.podIP" } } }, { "name": "PATRONI_KUBERNETES_NAMESPACE", "valueFrom": { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.namespace" } } }, { "name": "PATRONI_KUBERNETES_BYPASS_API_SERVICE", "value": "true" }, { "name": "PATRONI_KUBERNETES_USE_ENDPOINTS", "value": "true" }, { "name": "PATRONI_KUBERNETES_LABELS", "value": "{application: patroni, cluster-name: apidb}" }, { "name": "PATRONI_SUPERUSER_USERNAME", "value": "postgres" }, { "name": "PATRONI_SUPERUSER_PASSWORD", "value": "Ziyjkxkn4qxg9A" }, { "name": "PATRONI_REPLICATION_USERNAME", "value": "standby" }, { "name": "PATRONI_REPLICATION_PASSWORD", "value": "Ziyjkxkn4qxg9A" }, { "name": "PATRONI_SCOPE", "value": "apidb" }, { "name": "PATRONI_NAME", "valueFrom": { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.name" } } }, { "name": "PATRONI_POSTGRESQL_DATA_DIR", "value": "/home/postgres/pgdata/pgroot/data" }, { "name": "PATRONI_POSTGRESQL_PGPASS", "value": "/tmp/pgpass" }, { "name": "PATRONI_POSTGRESQL_LISTEN", "value": "0.0.0.0:5432" }, { "name": "PATRONI_RESTAPI_LISTEN", "value": "0.0.0.0:8008" } ], "image": "meetlily/patroni:latest", "imagePullPolicy": "IfNotPresent", "name": "apidb", "ports": [ { "containerPort": 8008, "protocol": "TCP" }, { "containerPort": 5432, "protocol": "TCP" } ], "readinessProbe": { "failureThreshold": 3, "httpGet": { "path": "/readiness", "port": 8008, "scheme": "HTTP" }, "initialDelaySeconds": 3, "periodSeconds": 10, "successThreshold": 1, "timeoutSeconds": 5 }, "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/home/postgres/pgdata", "name": "pgdata" }, { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-98zw9", "readOnly": true } ] } ], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "hostname": "apidb-2", "nodeName": "master", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "apidb", "serviceAccountName": "apidb", "subdomain": "apidb", "terminationGracePeriodSeconds": 0, "tolerations": [ { "effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300 }, { "effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300 } ], "volumes": [ { "emptyDir": {}, "name": "pgdata" }, { "name": "kube-api-access-98zw9", "projected": { "defaultMode": 420, "sources": [ { "serviceAccountToken": { "expirationSeconds": 3607, "path": "token" } }, { "configMap": { "items": [ { "key": "ca.crt", "path": "ca.crt" } ], "name": "kube-root-ca.crt" } }, { "downwardAPI": { "items": [ { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.namespace" }, "path": "namespace" } ] } } ] } } ] }, "status": { "conditions": [ { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:48:57Z", "status": "True", "type": "Initialized" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T17:45:29Z", "status": "True", "type": "Ready" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T17:45:29Z", "status": "True", "type": "ContainersReady" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:48:57Z", "status": "True", "type": "PodScheduled" } ], "containerStatuses": [ { "containerID": "containerd://e344115b5e7ca2ad18f423306005defae617c4cf9e8b781d71bbba04bdaf8d28", "image": "docker.io/meetlily/patroni:latest", "imageID": "docker.io/meetlily/patroni@sha256:3f58ee7edcd0998e6d0386756363163838a57d9023cb08a11ca5a57962d35251", "lastState": {}, "name": "apidb", "ready": true, "restartCount": 0, "started": true, "state": { "running": { "startedAt": "2023-07-25T16:49:10Z" } } } ], "hostIP": "10.0.1.1", "phase": "Running", "podIP": "10.1.219.74", "podIPs": [ { "ip": "10.1.219.74" } ], "qosClass": "BestEffort", "startTime": "2023-07-25T16:48:57Z" } }, { "apiVersion": "v1", "kind": "Pod", "metadata": { "annotations": { "cni.projectcalico.org/containerID": "22fa6be1f946d06aa51ebec2e2732a28a6a3426e3f86648e1a6e362a56135f33", "cni.projectcalico.org/podIP": "10.1.241.135/32", "cni.projectcalico.org/podIPs": "10.1.241.135/32", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{},\"name\":\"busybox\",\"namespace\":\"default\"},\"spec\":{\"containers\":[{\"command\":[\"sleep\",\"3600\"],\"image\":\"busybox\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"busybox\"}],\"restartPolicy\":\"Always\"}} " }, "creationTimestamp": "2023-07-25T16:46:41Z", "name": "busybox", "namespace": "default", "resourceVersion": "156173", "uid": "b71be0ca-f0fa-4dcf-adfd-5b7e63ef4ece" }, "spec": { "containers": [ { "command": [ "sleep", "3600" ], "image": "busybox", "imagePullPolicy": "IfNotPresent", "name": "busybox", "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-d6rvv", "readOnly": true } ] } ], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "control1", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "default", "serviceAccountName": "default", "terminationGracePeriodSeconds": 30, "tolerations": [ { "effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300 }, { "effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300 } ], "volumes": [ { "name": "kube-api-access-d6rvv", "projected": { "defaultMode": 420, "sources": [ { "serviceAccountToken": { "expirationSeconds": 3607, "path": "token" } }, { "configMap": { "items": [ { "key": "ca.crt", "path": "ca.crt" } ], "name": "kube-root-ca.crt" } }, { "downwardAPI": { "items": [ { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.namespace" }, "path": "namespace" } ] } } ] } } ] }, "status": { "conditions": [ { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:46:41Z", "status": "True", "type": "Initialized" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-26T05:48:29Z", "status": "True", "type": "Ready" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-26T05:48:29Z", "status": "True", "type": "ContainersReady" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T16:46:41Z", "status": "True", "type": "PodScheduled" } ], "containerStatuses": [ { "containerID": "containerd://952a6e1a1eb804fe294727c903da5c6bbfa12fd1533c001d8d0308a5e8f40de4", "image": "docker.io/library/busybox:latest", "imageID": "docker.io/library/busybox@sha256:3fbc632167424a6d997e74f52b878d7cc478225cffac6bc977eedfe51c7f4e79", "lastState": { "terminated": { "containerID": "containerd://0a9508c988515c31237c38a989c9ba9b0c679d70a0265b0b1440700ba69a002e", "exitCode": 0, "finishedAt": "2023-07-26T05:48:27Z", "reason": "Completed", "startedAt": "2023-07-26T04:48:27Z" } }, "name": "busybox", "ready": true, "restartCount": 13, "started": true, "state": { "running": { "startedAt": "2023-07-26T05:48:28Z" } } } ], "hostIP": "10.0.1.1", "phase": "Running", "podIP": "10.1.241.135", "podIPs": [ { "ip": "10.1.241.135" } ], "qosClass": "BestEffort", "startTime": "2023-07-25T16:46:41Z" } }, { "apiVersion": "v1", "kind": "Pod", "metadata": { "annotations": { "cni.projectcalico.org/containerID": "3140ad7895595c175f058ad0932a8a659f0c8ec6ea119481866d1bbf1119b7db", "cni.projectcalico.org/podIP": "10.1.241.149/32", "cni.projectcalico.org/podIPs": "10.1.241.149/32" }, "creationTimestamp": "2023-07-25T19:31:17Z", "generateName": "nodejs-app-deployment-7fdd5459d6-", "labels": { "app": "nodejs-app", "pod-template-hash": "7fdd5459d6" }, "name": "nodejs-app-deployment-7fdd5459d6-jqsh9", "namespace": "default", "ownerReferences": [ { "apiVersion": "apps/v1", "blockOwnerDeletion": true, "controller": true, "kind": "ReplicaSet", "name": "nodejs-app-deployment-7fdd5459d6", "uid": "667fd5c0-762f-40d0-bf1d-e24713977244" } ], "resourceVersion": "166734", "uid": "a6635c82-5bd5-459a-89d8-4bdca17290a2" }, "spec": { "containers": [ { "image": "node:16", "imagePullPolicy": "IfNotPresent", "name": "nodejs-app", "ports": [ { "containerPort": 3000, "protocol": "TCP" } ], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [ { "mountPath": "/app", "name": "app-volume" }, { "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-c8cb2", "readOnly": true } ] } ], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "control1", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "default", "serviceAccountName": "default", "terminationGracePeriodSeconds": 30, "tolerations": [ { "effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300 }, { "effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300 } ], "volumes": [ { "name": "app-volume", "persistentVolumeClaim": { "claimName": "app-pvc" } }, { "name": "kube-api-access-c8cb2", "projected": { "defaultMode": 420, "sources": [ { "serviceAccountToken": { "expirationSeconds": 3607, "path": "token" } }, { "configMap": { "items": [ { "key": "ca.crt", "path": "ca.crt" } ], "name": "kube-root-ca.crt" } }, { "downwardAPI": { "items": [ { "fieldRef": { "apiVersion": "v1", "fieldPath": "metadata.namespace" }, "path": "namespace" } ] } } ] } } ] }, "status": { "conditions": [ { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T19:31:24Z", "status": "True", "type": "Initialized" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-26T06:42:34Z", "message": "containers with unready status: [nodejs-app]", "reason": "ContainersNotReady", "status": "False", "type": "Ready" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-26T06:42:34Z", "message": "containers with unready status: [nodejs-app]", "reason": "ContainersNotReady", "status": "False", "type": "ContainersReady" }, { "lastProbeTime": null, "lastTransitionTime": "2023-07-25T19:31:24Z", "status": "True", "type": "PodScheduled" } ], "containerStatuses": [ { "containerID": "containerd://6d6bc21c77f7c04b57561938f60b28f2e31f3255295f56dc06ee720c1a85b3a4", "image": "docker.io/library/node:16", "imageID": "docker.io/library/node@sha256:466d0a05ecb1e5b9890960592311fa10c2bc6012fc27dbfdcc74abf10fc324fc", "lastState": { "terminated": { "containerID": "containerd://6d6bc21c77f7c04b57561938f60b28f2e31f3255295f56dc06ee720c1a85b3a4", "exitCode": 0, "finishedAt": "2023-07-26T06:42:33Z", "reason": "Completed", "startedAt": "2023-07-26T06:42:33Z" } }, "name": "nodejs-app", "ready": false, "restartCount": 136, "started": false, "state": { "waiting": { "message": "back-off 5m0s restarting failed container=nodejs-app pod=nodejs-app-deployment-7fdd5459d6-jqsh9_default(a6635c82-5bd5-459a-89d8-4bdca17290a2)", "reason": "CrashLoopBackOff" } } } ], "hostIP": "10.0.1.1", "phase": "Running", "podIP": "10.1.241.149", "podIPs": [ { "ip": "10.1.241.149" } ], "qosClass": "BestEffort", "startTime": "2023-07-25T19:31:24Z" } } ], "kind": "List", "metadata": { "resourceVersion": "" } }
